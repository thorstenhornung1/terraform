# =============================================================================
# Ansible Inventory for PostgreSQL HA + SeaweedFS Infrastructure
# =============================================================================
# This inventory defines the Docker Swarm nodes for infrastructure deployment:
#   - Swarm managers (for Docker node commands)
#   - Infrastructure nodes (for node preparation)
#
# Usage:
#   ansible-playbook -i inventory.ini prepare-infra-nodes.yml
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Swarm Managers
# -----------------------------------------------------------------------------
# Used for running Docker Swarm commands (node labels, stack deploys)
# Only the first manager is needed for most operations

[swarm_managers]
docker-app-1    ansible_host=192.168.4.30

# -----------------------------------------------------------------------------
# Infrastructure Nodes
# -----------------------------------------------------------------------------
# These nodes run PostgreSQL HA + SeaweedFS services
# Connected to both VLAN 4 (cluster) and VLAN 12 (storage)

[infra_nodes]
docker-infra-1  ansible_host=192.168.4.40  storage_ip=192.168.12.40  infra_node_id=1
docker-infra-2  ansible_host=192.168.4.41  storage_ip=192.168.12.41  infra_node_id=2
docker-infra-3  ansible_host=192.168.4.42  storage_ip=192.168.12.42  infra_node_id=3

# -----------------------------------------------------------------------------
# All Nodes (for common configuration)
# -----------------------------------------------------------------------------

[all:vars]
ansible_user=ansible
ansible_ssh_private_key_file=~/.ssh/id_ed25519
ansible_python_interpreter=/usr/bin/python3

# Disable host key checking for new VMs (optional, remove for production)
# ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# -----------------------------------------------------------------------------
# Group Combinations
# -----------------------------------------------------------------------------

[docker_swarm:children]
swarm_managers
infra_nodes
