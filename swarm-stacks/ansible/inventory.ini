# =============================================================================
# Ansible Inventory for Docker Swarm Infrastructure
# =============================================================================
# This inventory defines the Docker Swarm nodes:
#   - Swarm managers (infra nodes - for Docker commands + Patroni)
#   - Management LXC (swarm-control - Portainer bootstrap/recovery)
#
# Usage:
#   ansible-playbook -i inventory.ini prepare-infra-nodes.yml
# =============================================================================

# -----------------------------------------------------------------------------
# Docker Swarm Managers (Infrastructure Nodes)
# -----------------------------------------------------------------------------
# These nodes are Swarm managers AND run Patroni PostgreSQL
# Connected to both VLAN 4 (cluster) and VLAN 12 (storage)

[swarm_managers]
docker-infra-1  ansible_host=192.168.4.40

# -----------------------------------------------------------------------------
# Infrastructure Nodes
# -----------------------------------------------------------------------------
# Same as swarm_managers - all infra nodes are managers

[infra_nodes]
docker-infra-1  ansible_host=192.168.4.40  storage_ip=192.168.12.40  infra_node_id=1
docker-infra-2  ansible_host=192.168.4.41  storage_ip=192.168.12.41  infra_node_id=2
docker-infra-3  ansible_host=192.168.4.42  storage_ip=192.168.12.42  infra_node_id=3

# -----------------------------------------------------------------------------
# All Nodes (for common configuration)
# -----------------------------------------------------------------------------

[all:vars]
ansible_user=ansible
ansible_ssh_private_key_file=~/.ssh/id_ed25519
ansible_python_interpreter=/usr/bin/python3

# Disable host key checking for new VMs (optional, remove for production)
# ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# -----------------------------------------------------------------------------
# Group Combinations
# -----------------------------------------------------------------------------

[docker_swarm:children]
swarm_managers
infra_nodes
